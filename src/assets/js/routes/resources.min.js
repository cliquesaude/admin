!function(){"use strict";var n=window.tabId,s=window.Tabs[n];window.renderContentIds();var a=window.routeParams[0];if(void 0!==a){var e=window.apiResources[a];if(void 0!==e){var t,o,i,r,d,c=window.lang,l=window.i18n,u=window.routeParams[1];void 0===u?(t=l({en_us:"List",pt_br:"Listar"}),o=e.label[c],r=!0):("new"===u?(t=l({en_us:"Create",pt_br:"Criar"}),i=!(u=void 0)):t=l({en_us:"Edit",pt_br:"Editar"}),o=e.label[c]+" · "+t),d="<strong>"+e.label[c]+"</strong> · "+t,$("#t"+n+"-resource-name").html(d),d='<li class="breadcrumb-item"><a href="/#/resources/'+a+'"><i class="fa fa-'+e.icon+'"></i> '+e.label[c]+'</a></li><li class="breadcrumb-item active">'+t+"</li>",$("#t"+n+"-breadcrumbs").append(d);var w=ace.edit("t"+n+"-code-editor");w.setTheme("ace/theme/dawn"),w.session.setMode("ace/mode/json"),$("#t"+n+"-code-tab").click(function(){setTimeout(function(){w.focus(),w.renderer.updateFull()},200)});var f=function(e){var t;e||(!0===r?t="products"!==a?"routes/resources/list.html":"routes/resources/list/products.html":(t="routes/resources/form/"+a+".html",s.commit=m,w.on("blur",function(){var e;try{e=JSON.parse(w.session.getValue())}catch(e){return}s.data=e}),w.on("change",function(){window.triggerUnsaved(n)})),window.loadContent(t,$("#t"+n+"-tab-normal")));window.routeReady(o)},m=function(e,t){t||(s.data=e),w.session.setValue(JSON.stringify(e,null,4))};if(s.resourceId=u,s.slug=a,!0!==i){var v,b,p;if(void 0===u){w.setReadOnly(!0);"products"===a?b=function(n,e){e||(e={size:60}),window.callSearchApi("items.json","POST",function(e,t){e||m(t),"function"==typeof n&&n(null,t)},e)}:(v=a+".json",p="limit=60")}else v=a+"/"+u+".json";b||(b=function(n,e){var t=v;e&&(t+="?"+e),window.callApi(t,"GET",function(e,t){e||(void 0!==u&&(delete t._id,delete t.store_id,delete t.created_at,delete t.updated_at),m(t)),"function"==typeof n&&n(null,t)})}),s.load=b,$("#t"+n+"-new").fadeIn().click(function(){window.location="/"+window.location.hash+"/new"}),s.selectedItems=[],s.deleteItems=function(){return function(){}},$("#t"+n+"-delete").fadeIn().click(function(){var t=s.selectedItems.length;if(0<t){var n=s.deleteItems(),o=0,i=function(){var e=s.selectedItems[o];window.callApi(a+"/"+e+".json","DELETE",function(){++o===t?("function"==typeof n&&n(),s.selectedItems=[]):i()})};i()}}),b(f,p)}else m({}),f()}else window.e404()}else window.e404()}();