/*!
 * Copyright 2018 E-Com Club
 */
!function(){"use strict";var a=window.tabId;window.renderContentIds();var b=window.routeParams[0];if(void 0===b)return void window.e404();var c=window.apiResources[b];if(void 0===c)return void window.e404();var d,e,f,g,h=window.lang,i=window.i18n,j=window.routeParams[1];void 0===j?(d=i({en_us:"List",pt_br:"Listar"}),e=c.label[h],g=!0):("new"===j?(d=i({en_us:"Create",pt_br:"Criar"}),j=void 0,f=!0):d=i({en_us:"Edit",pt_br:"Editar"}),e=c.label[h]+" · "+d);var k;k="<strong>"+c.label[h]+"</strong> · "+d,$("#"+a+"-resource-name").html(k),k='<li class="breadcrumb-item"><a href="/#/resources/'+b+'"><i class="fa fa-'+c.icon+'"></i> '+c.label[h]+'</a></li><li class="breadcrumb-item active">'+d+"</li>",$("#"+a+"-breadcrumbs").append(k);var l=ace.edit(a+"-code-editor");l.setTheme("ace/theme/dawn"),l.session.setMode("ace/mode/json"),$("#"+a+"-code-tab").click(function(){setTimeout(function(){l.focus(),l.renderer.updateFull()},200)});var m=function(c){if(!c){var d;!0===g?d="routes/resources/list.html":(d="routes/resources/form/"+b+".html",window.tabCommit[a]=n,l.on("blur",function(){var b;try{b=JSON.parse(l.session.getValue())}catch(a){return}window.tabData[a]=b}),l.on("change",function(){window.triggerUnsaved(a)})),window.loadContent(d,$("#"+a+"-tab-normal"))}window.routeReady(e)},n=function(b,c){c||(window.tabData[a]=b),l.session.setValue(JSON.stringify(b,null,4))};if(!0!==f){var o,p=function(a,b){var c=o;b&&(c+="?"+b),window.callApi(c,"GET",function(b,c){b||(delete c._id,delete c.store_id,delete c.created_at,delete c.updated_at,n(c)),"function"==typeof a&&a(null,c)})};window.tabLoad[a]=p;var q;void 0===j?(o=b+".json",q="limit=60",l.setReadOnly(!0)):o=b+"/"+j+".json",p(m,q)}else n({}),m()}();