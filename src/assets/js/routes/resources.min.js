/*!
 * Copyright 2018 E-Com Club
 */
!function(){"use strict";var a=window.tabId,b=window.Tabs[a];window.renderContentIds();var c=window.routeParams[0];if(void 0===c)return void window.e404();var d=window.apiResources[c];if(void 0===d)return void window.e404();var e,f,g,h,i=window.lang,j=window.i18n,k=window.routeParams[1];void 0===k?(e=j({en_us:"List",pt_br:"Listar"}),f=d.label[i],h=!0):("new"===k?(e=j({en_us:"Create",pt_br:"Criar"}),k=void 0,g=!0):e=j({en_us:"Edit",pt_br:"Editar"}),f=d.label[i]+" · "+e);var l;l="<strong>"+d.label[i]+"</strong> · "+e,$("#"+a+"-resource-name").html(l),l='<li class="breadcrumb-item"><a href="/#/resources/'+c+'"><i class="fa fa-'+d.icon+'"></i> '+d.label[i]+'</a></li><li class="breadcrumb-item active">'+e+"</li>",$("#"+a+"-breadcrumbs").append(l);var m=ace.edit(a+"-code-editor");m.setTheme("ace/theme/dawn"),m.session.setMode("ace/mode/json"),$("#"+a+"-code-tab").click(function(){setTimeout(function(){m.focus(),m.renderer.updateFull()},200)});var n=function(d){if(!d){var e;!0===h?e="routes/resources/list.html":(e="routes/resources/form/"+c+".html",b.commit=o,m.on("blur",function(){var a;try{a=JSON.parse(m.session.getValue())}catch(a){return}b.data=a}),m.on("change",function(){window.triggerUnsaved(a)})),window.loadContent(e,$("#"+a+"-tab-normal"))}window.routeReady(f)},o=function(a,c){c||(b.data=a),m.session.setValue(JSON.stringify(a,null,4))};if(b.resourceId=k,b.slug=c,!0!==g){var p,q=function(a,b){var c=p;b&&(c+="?"+b),window.callApi(c,"GET",function(b,c){b||(delete c._id,delete c.store_id,delete c.created_at,delete c.updated_at,o(c)),"function"==typeof a&&a(null,c)})};b.load=q;var r;void 0===k?(p=c+".json",r="limit=60",m.setReadOnly(!0)):p=c+"/"+k+".json",q(n,r)}else o({}),n()}();