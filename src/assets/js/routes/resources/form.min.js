/*!
 * Copyright 2018 E-Com Club
 */
!function(){"use strict";var a=window.tabId,b=$("#"+a+"-tab-normal");window.renderContentIds(b);var c,d=window.routeParams[0],e=window.routeParams[1];"new"===e&&(c=!0);var f=window.tabCommit[a],g=function(){return window.tabData[a]},h=b.children("form");window.setSaveAction(h,function(b){var f,i;c?(i=d+".json",f="POST"):(i=d+"/"+e+".json",f="PUT"),h.addClass("ajax");var j=function(){h.removeClass("ajax"),"function"==typeof b&&b(a)};window.callApi(i,f,j,g())});var i=0,j=0,k=function(){++j===i&&(h.find(".html-editor").summernote(),h.find(".tagsinput").tagsinput("items"),h.find("select:not(.tags)").selectpicker({style:"btn-light"}),h.find('input[type="text"],select').change(function(){var a=$(this).attr("name");if(a&&""!==a){var b=g(),c=$(this).val().trim();if(""!==c)b[a]=c;else{if(!b.hasOwnProperty(a))return;delete b[a]}f(b,!0)}}),h.removeClass("ajax ajax-cards"))};h.find("select").each(function(a){var b=$(this).data("fill");if(b){i++;var c=[$(this)];h.find('select[data-fill-same="'+$(this).attr("name")+'"]').each(function(){c.push($(this))}),window.callApi(b+".json","GET",function(a,b){if(!a){var d=b.result;if(d)for(var e=0;e<d.length;e++)for(var f=d[e],g=0;g<c.length;g++)c[g].append('<option value="'+f._id+'">'+f.name+"</option>")}k()})}})}();