!function(){"use strict";var m,f,t=window.tabId,a=window.Tabs[t],v=$("#products-list-container"),b=v.find("#products-list-results"),h=window.i18n,s=function(){m=a.data,f=m.hits.hits.map(function(t){return Object.assign(t._source,{_id:t._id})})};if(s(),f.length){var e="",c=[],r=function(){var t;""!==e?(t={bool:{must:{multi_match:{query:e,fields:["name","keywords"]}}}},c.length&&(t.bool.filter=c)):c.length&&(t={bool:{filter:c}});v.addClass("ajax"),a.load(function(){s(),n()},t)},g=$("<form />",{action:"javascript:;",submit:r,html:'<div class="form-group"><input class="form-control text-monospace" placeholder="SKU" type="text" name="sku" data-filter="term"/></div><div id="products-custom-filters"></div><div class="form-group"><label class="i18n"><span data-lang="en_us">Price</span><span data-lang="pt_br">Preço</span></label><div id="products-price-range"></div><div class="flexbox"><div class="form-group"><input class="form-control" type="tel" name="price" data-opt="gte" data-filter="range" data-is-number="true" data-money="true"/><small class="form-text i18n"><span data-lang="en_us">Minimun</span><span data-lang="pt_br">Mínimo</span></small></div><div class="form-group"><input class="form-control" type="tel" name="price" data-opt="lte" data-filter="range" data-is-number="true" data-money="true"/><small class="form-text i18n"><span data-lang="en_us">Maximum</span><span data-lang="pt_br">Máximo</span></small></div></div></div>'}),l=$("#qvx");l.find("#qvx-title").text(h({en_us:"Filters",pt_br:"Filtros"})),l.find("#qvx-body").html(g),l.find("#qvx-footer").html($("<button />",{class:"btn btn-block btn-primary",click:g.submit,html:'<i class="fa fa-filter"></i> '+h({en_us:"Filter products",pt_br:"Filtrar produtos"})})),handleInputs(g,function(t,a){var s=t.attr("name"),e=t.data("opt"),r=t.data("filter"),l=t.val();l=t.data("is-number")?stringToNumber(l):"number"===t.attr("type")?parseFloat(l):l.trim();for(var n=0;n<c.length;n++){var o=c[n][r];if(o&&o.hasOwnProperty(s))return void(e?""!==l?o[s][e]=l:(delete o[s][e],Object.keys(o[s]).length||c.splice(n,1)):""!==l?o[s]=l:c.splice(n,1))}if(""!==l){var i={};i[r]={},e?(i[r][s]={},i[r][s][e]=l):i[r][s]=l,c.push(i)}});var n=function(){for(var t=[],a=0;a<f.length;a++){var s=f[a],e=$("<div />",{class:"col",html:'<a href="/'+window.location.hash+"/"+s._id+'">'+s.name+'</a><div class="custom-controls-stacked"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input"><label class="custom-control-label text-monospace">'+s.sku+"</label></div></div>"});t.push(e)}b.html($("<div />",{class:"row row-products",html:t}));var r=g.find("#products-custom-filters");r.html("");var l={brands:{label:h({en_us:"Brands",pt_br:"Marcas"})},categories:{label:h({en_us:"Categories",pt_br:"Categorias"})}},n=m.aggregations;for(var o in l)if(l.hasOwnProperty(o)&&n.hasOwnProperty(o)){var i=l[o],c=n[o].buckets,d="";for(a=0;a<c.length;a++){var u=c[a].key;d+='<option value="'+u+'" data-subtext="('+c[a].doc_count+')">'+u+"</option>"}var p=$("<select />",{multiple:!0,"data-live-search":!0,class:"form-control",html:d});r.prepend($("<div />",{class:"form-group selectpicker-default",html:p})),p.selectpicker({style:"btn-light",noneSelectedText:i.label,windowPadding:70})}v.removeClass("ajax")},o=v.find("#search-products"),i=o.find("input");i.attr("placeholder",h({en_us:"Polo Shirt",pt_br:"Camisa Polo"})),o.submit(function(){e=i.val().trim(),r()}),n()}}();