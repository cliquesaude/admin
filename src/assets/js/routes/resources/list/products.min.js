!function(){"use strict";var p,m,t=window.tabId,a=window.Tabs[t],f=$("#products-list-container"),v=f.find("#products-list-results"),b=window.i18n,e=function(){p=a.data,m=p.hits.hits.map(function(t){return Object.assign({_id:t._id},t._source)})};if(e(),m.length){var l="",h=[],s=function(){var t;""!==l?(t={bool:{must:{multi_match:{query:l,fields:["name","keywords"]}}}},h.length&&(t.bool.filter=h)):h.length&&(t={bool:{filter:h}});f.addClass("ajax"),a.load(function(){e(),o()},t)},g=$("<div />"),n=$("<div />"),_=$("<form />",{action:"javascript:;",submit:s,html:['<div class="form-group"><input class="form-control text-monospace" placeholder="SKU" type="text" name="sku" data-filter="term"/></div>',g,'<label class="i18n"><span data-lang="en_us">Price</span><span data-lang="pt_br">Preço</span></label>',n,'<div class="flexbox"><div class="form-group"><input class="form-control" type="tel" name="price" data-opt="gte" data-filter="range" data-is-number="true" data-money="true"/><small class="form-text i18n"><span data-lang="en_us">Minimun</span><span data-lang="pt_br">Mínimo</span></small></div><div class="form-group"><input class="form-control" type="tel" name="price" data-opt="lte" data-filter="range" data-is-number="true" data-money="true"/><small class="form-text i18n"><span data-lang="en_us">Maximum</span><span data-lang="pt_br">Máximo</span></small></div></div>']}),r=$("#qvx");r.find("#qvx-title").text(b({en_us:"Filters",pt_br:"Filtros"})),r.find("#qvx-body").html(_),r.find("#qvx-footer").html($("<button />",{class:"btn btn-block btn-success",click:function(){s(),quickview.close(r)},html:b({en_us:"Filter products",pt_br:"Filtrar produtos"})}));var o=function(){for(var t=[],a=0;a<m.length;a++){var e=m[a],l=$("<div />",{class:"col",html:'<a href="/'+window.location.hash+"/"+e._id+'">'+e.name+'</a><div class="custom-controls-stacked"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input"><label class="custom-control-label text-monospace">'+e.sku+"</label></div></div>"});t.push(l)}v.html($("<div />",{class:"row row-products",html:t})),g.html("");var s={brands:{label:b({en_us:"Brands",pt_br:"Marcas"})},categories:{label:b({en_us:"Categories",pt_br:"Categorias"})}},n=p.aggregations;for(var r in s)if(s.hasOwnProperty(r)&&n.hasOwnProperty(r)){var o=s[r],i=n[r].buckets,c="";for(a=0;a<i.length;a++){var d=i[a].key;c+='<option value="'+d+'" data-subtext="('+i[a].doc_count+')">'+d+"</option>"}var u=$("<select />",{multiple:!0,"data-live-search":!0,class:"form-control",name:r+".name",html:c});g.prepend($("<div />",{class:"form-group selectpicker-default",html:u})),u.selectpicker({style:"btn-light",noneSelectedText:o.label,windowPadding:70})}f.removeClass("ajax"),handleInputs(_,function(t,a){var e=t.attr("name"),l=t.data("opt"),s=t.data("filter")||"terms",n=t.val();Array.isArray(n)?n.length||(n=null):t.data("is-number")?n=stringToNumber(n):"number"===t.attr("type")?n=parseFloat(n):""===(n=n.trim())&&(n=null);for(var r=0;r<h.length;r++){var o=h[r][s];if(o&&o.hasOwnProperty(e))return void(l?null!==n?o[e][l]=n:(delete o[e][l],Object.keys(o[e]).length||h.splice(r,1)):null!==n?o[e]=n:h.splice(r,1))}if(null!==n){var i={};i[s]={},l?(i[s][e]={},i[s][e][l]=n):i[s][e]=n,h.push(i)}})},i=f.find("#search-products"),c=i.find("input");c.attr("placeholder",b({en_us:"Polo Shirt",pt_br:"Camisa Polo"})),i.submit(function(){l=c.val().trim(),s()}),o()}}();