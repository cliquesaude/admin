!function(){"use strict";var h,m,t=window.tabId,a=window.Tabs[t],f=$("#products-list-container"),v=window.i18n,e=function(){h=a.data,m=h.hits.hits.map(function(t){return Object.assign(t._source,{_id:t._id})})};if(e(),m.length){var r="",c=[],s=function(){var t;""!==r?(t={bool:{must:{multi_match:{query:r,fields:["name","keywords"]}}}},c.length&&(t.bool.filter=c)):c.length&&(t={bool:{filter:c}});f.addClass("ajax"),a.load(function(){e(),o()},t)},b=f.find("#products-list-results"),g=$("#filter-products");g.submit(s),handleInputs(g,function(t,a){var e=t.attr("name"),r=t.data("opt"),s=t.data("filter"),o=t.val();o=t.data("is-number")?stringToNumber(o):"number"===t.attr("type")?parseFloat(o):o.trim();for(var l=0;l<c.length;l++){var i=c[l][s];if(i&&i.hasOwnProperty(e))return void(r?""!==o?i[e][r]=o:(delete i[e][r],Object.keys(i[e]).length||c.splice(l,1)):""!==o?i[e]=o:c.splice(l,1))}if(""!==o){var n={};n[s]={},r?(n[s][e]={},n[s][e][r]=o):n[s][e]=o,c.push(n)}});var o=function(){for(var t=[],a=0;a<m.length;a++){var e=m[a],r=$("<div />",{class:"col",html:'<a href="/'+window.location.hash+"/"+e._id+'">'+e.name+'</a><div class="custom-controls-stacked"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input"><label class="custom-control-label text-monospace">'+e.sku+"</label></div></div>"});t.push(r)}b.html($("<div />",{class:"row row-products",html:t}));var s=g.find("#products-custom-filters");s.html("");var o={brands:{label:v({en_us:"Brands",pt_br:"Marcas"})},categories:{label:v({en_us:"Categories",pt_br:"Categorias"})}},l=h.aggregations;for(var i in o)if(o.hasOwnProperty(i)&&l.hasOwnProperty(i)){var n=o[i],c=l[i].buckets,d="";for(a=0;a<c.length;a++){var u=c[a].key;d+='<option value="'+u+'" data-subtext="('+c[a].doc_count+')">'+u+"</option>"}var p=$("<select />",{multiple:!0,"data-live-search":!0,class:"form-control",html:d});s.prepend($("<div />",{class:"form-group selectpicker-default",html:p})),p.selectpicker({style:"btn-light",noneSelectedText:n.label,windowPadding:70})}f.removeClass("ajax")},l=f.find("#search-products"),i=l.find("input");i.attr("placeholder",v({en_us:"Polo Shirt",pt_br:"Camisa Polo"})),l.submit(function(){r=i.val().trim(),s()}),o()}}();