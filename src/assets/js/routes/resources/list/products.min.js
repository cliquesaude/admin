!function(){"use strict";var f,v,t=window.tabId,a=window.Tabs[t],b=$("#products-list-container"),h=b.find("#products-list-results"),g=window.i18n,e=function(){f=a.data,v=f.hits.hits.map(function(t){return Object.assign({_id:t._id},t._source)})};if(e(),v.length){var n="",_=[],s=function(){var t;""!==n?(t={bool:{must:{multi_match:{query:n,fields:["name","keywords"]}}}},_.length&&(t.bool.filter=_)):_.length&&(t={bool:{filter:_}});b.addClass("ajax"),a.load(function(){e(),i()},t)},y=$("<div />"),l=$("<div />"),x=$("<form />",{action:"javascript:;",submit:s,html:['<div class="form-group"><input class="form-control text-monospace" placeholder="SKU" type="text" name="sku" data-filter="term"/></div>',y,'<label class="i18n"><span data-lang="en_us">Price</span><span data-lang="pt_br">Preço</span></label>',l,'<div class="flexbox"><div class="form-group"><input class="form-control" type="tel" name="price" data-opt="gte" data-filter="range" data-is-number="true" data-money="true"/><small class="form-text i18n"><span data-lang="en_us">Minimun</span><span data-lang="pt_br">Mínimo</span></small></div><div class="form-group"><input class="form-control" type="tel" name="price" data-opt="lte" data-filter="range" data-is-number="true" data-money="true"/><small class="form-text i18n"><span data-lang="en_us">Maximum</span><span data-lang="pt_br">Máximo</span></small></div></div>']}),r=$("#qvx");r.find("#qvx-title").text(g({en_us:"Filter products",pt_br:"Filtrar produtos"})),r.find("#qvx-body").html(x),r.find("#qvx-footer").html($("<button />",{class:"btn btn-block btn-success",click:function(){s(),quickview.close(r)},html:g({en_us:"Apply filters",pt_br:"Aplicar filtros"})}));var i=function(){for(var t=[],a=0;a<v.length;a++){var e,n,s=v[a];e=s.price?formatMoney(s.price,s.currency_id):g({en_us:"Undefined price",pt_br:"Preço indefinido"}),n=s.quantity?s.quantity+" un":"∞";var l=$("<div />",{class:"col",html:'<div class="item-info"><a href="/'+window.location.hash+"/"+s._id+'">'+s.name+'</a><div class="item-price">'+e+'</div><div class="item-qnt">'+n+'</div></div><div class="custom-controls-stacked"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input"><label class="custom-control-label text-monospace">'+s.sku+"</label></div></div>"});t.push(l)}h.html($("<div />",{class:"row row-products",html:t})),y.html("");var r={brands:{label:g({en_us:"Brands",pt_br:"Marcas"})},categories:{label:g({en_us:"Categories",pt_br:"Categorias"})}},i=f.aggregations;for(var o in r)if(r.hasOwnProperty(o)&&i.hasOwnProperty(o)){var c=r[o],d=i[o].buckets,u="";for(a=0;a<d.length;a++){var p=d[a].key;u+='<option value="'+p+'" data-subtext="('+d[a].doc_count+')">'+p+"</option>"}var m=$("<select />",{multiple:!0,"data-live-search":!0,class:"form-control",name:o+".name",html:u});y.prepend($("<div />",{class:"form-group selectpicker-default",html:m})),m.selectpicker({style:"btn-light",noneSelectedText:c.label,windowPadding:70})}b.removeClass("ajax"),handleInputs(x,function(t,a){var e=t.attr("name"),n=t.data("opt"),s=t.data("filter")||"terms",l=t.val();Array.isArray(l)?l.length||(l=null):t.data("is-number")?l=stringToNumber(l):"number"===t.attr("type")?l=parseFloat(l):""===(l=l.trim())&&(l=null);for(var r=0;r<_.length;r++){var i=_[r][s];if(i&&i.hasOwnProperty(e))return void(n?null!==l?i[e][n]=l:(delete i[e][n],Object.keys(i[e]).length||_.splice(r,1)):null!==l?i[e]=l:_.splice(r,1))}if(null!==l){var o={};o[s]={},n?(o[s][e]={},o[s][e][n]=l):o[s][e]=l,_.push(o)}})},o=b.find("#search-products"),c=o.find("input");c.attr("placeholder",g({en_us:"Polo Shirt",pt_br:"Camisa Polo"})),o.submit(function(){n=c.val().trim(),s()}),i()}}();