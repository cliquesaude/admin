!function(){"use strict";var p,m,t=window.tabId,a=window.Tabs[t],f=$("#products-list-container"),b=f.find("#products-list-results"),v=window.i18n,e=function(){p=a.data,m=p.hits.hits.map(function(t){return Object.assign(t._source,{_id:t._id})})};if(e(),m.length){var s="",c=[],l=function(){var t;""!==s?(t={bool:{must:{multi_match:{query:s,fields:["name","keywords"]}}}},c.length&&(t.bool.filter=c)):c.length&&(t={bool:{filter:c}});f.addClass("ajax"),a.load(function(){e(),i()},t)},h=$("<div />"),n=$("<div />"),r=$("<form />",{action:"javascript:;",submit:l,html:['<div class="form-group"><input class="form-control text-monospace" placeholder="SKU" type="text" name="sku" data-filter="term"/></div>',h,'<label class="i18n"><span data-lang="en_us">Price</span><span data-lang="pt_br">Preço</span></label>',n,'<div class="flexbox"><div class="form-group"><input class="form-control" type="tel" name="price" data-opt="gte" data-filter="range" data-is-number="true" data-money="true"/><small class="form-text i18n"><span data-lang="en_us">Minimun</span><span data-lang="pt_br">Mínimo</span></small></div><div class="form-group"><input class="form-control" type="tel" name="price" data-opt="lte" data-filter="range" data-is-number="true" data-money="true"/><small class="form-text i18n"><span data-lang="en_us">Maximum</span><span data-lang="pt_br">Máximo</span></small></div></div>']}),o=$("#qvx");o.find("#qvx-title").text(v({en_us:"Filters",pt_br:"Filtros"})),o.find("#qvx-body").html(r),o.find("#qvx-footer").html($("<button />",{class:"btn btn-block btn-success",click:function(){r.submit(),quickview.close(o)},html:v({en_us:"Filter products",pt_br:"Filtrar produtos"})})),handleInputs(r,function(t,a){var e=t.attr("name"),s=t.data("opt"),l=t.data("filter"),n=t.val();n=t.data("is-number")?stringToNumber(n):"number"===t.attr("type")?parseFloat(n):n.trim();for(var r=0;r<c.length;r++){var o=c[r][l];if(o&&o.hasOwnProperty(e))return void(s?""!==n?o[e][s]=n:(delete o[e][s],Object.keys(o[e]).length||c.splice(r,1)):""!==n?o[e]=n:c.splice(r,1))}if(""!==n){var i={};i[l]={},s?(i[l][e]={},i[l][e][s]=n):i[l][e]=n,c.push(i)}});var i=function(){for(var t=[],a=0;a<m.length;a++){var e=m[a],s=$("<div />",{class:"col",html:'<a href="/'+window.location.hash+"/"+e._id+'">'+e.name+'</a><div class="custom-controls-stacked"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input"><label class="custom-control-label text-monospace">'+e.sku+"</label></div></div>"});t.push(s)}b.html($("<div />",{class:"row row-products",html:t})),h.html("");var l={brands:{label:v({en_us:"Brands",pt_br:"Marcas"})},categories:{label:v({en_us:"Categories",pt_br:"Categorias"})}},n=p.aggregations;for(var r in l)if(l.hasOwnProperty(r)&&n.hasOwnProperty(r)){var o=l[r],i=n[r].buckets,c="";for(a=0;a<i.length;a++){var d=i[a].key;c+='<option value="'+d+'" data-subtext="('+i[a].doc_count+')">'+d+"</option>"}var u=$("<select />",{multiple:!0,"data-live-search":!0,class:"form-control",html:c});h.prepend($("<div />",{class:"form-group selectpicker-default",html:u})),u.selectpicker({style:"btn-light",noneSelectedText:o.label,windowPadding:70})}f.removeClass("ajax")},d=f.find("#search-products"),u=d.find("input");u.attr("placeholder",v({en_us:"Polo Shirt",pt_br:"Camisa Polo"})),d.submit(function(){s=u.val().trim(),l()}),i()}}();