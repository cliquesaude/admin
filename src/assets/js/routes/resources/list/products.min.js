!function(){"use strict";var p,h,t=window.tabId,a=window.Tabs[t],m=$("#products-list-container"),f=window.i18n,e=function(){p=a.data,h=p.hits.hits.map(function(t){return Object.assign(t._source,{_id:t._id})})};if(e(),h.length){var s="",c=[],o=function(){var t;""!==s?(t={bool:{must:{multi_match:{query:s,fields:["name","keywords"]}}}},c.length&&(t.bool.filter=c)):c.length&&(t={bool:{filter:c}});m.addClass("ajax"),a.load(function(){e(),r()},t)},v=m.find("#products-list-results"),b=m.find("#products-list-filters");b.submit(o),handleInputs(b,function(t,a){var e=t.attr("name"),s=t.data("opt"),o=t.data("filter"),r=t.val();r=t.data("is-number")?stringToNumber(r):"number"===t.attr("type")?parseFloat(r):r.trim();for(var l=0;l<c.length;l++){var n=c[l][o];if(n&&n.hasOwnProperty(e))return void(s?""!==r?n[e][s]=r:(delete n[e][s],Object.keys(n[e]).length||c.splice(l,1)):""!==r?n[e]=r:c.splice(l,1))}if(""!==r){var i={};i[o]={},s?(i[o][e]={},i[o][e][s]=r):i[o][e]=r,c.push(i)}});var r=function(){for(var t=[],a=0;a<h.length;a++){var e=h[a],s=$("<div />",{class:"col",html:'<a href="/'+window.location.hash+"/"+e._id+'">'+e.name+'</a><div class="custom-controls-stacked"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input"><label class="custom-control-label text-monospace">'+e.sku+"</label></div></div>"});t.push(s)}v.html($("<div />",{class:"row row-products",html:t}));var o={brands:{label:f({en_us:"Brands",pt_br:"Marcas"})},categories:{label:f({en_us:"Categories",pt_br:"Categorias"})}},r=p.aggregations;for(var l in o)if(o.hasOwnProperty(l)&&r.hasOwnProperty(l)){var n=o[l],i=r[l].buckets,c="";for(a=0;a<i.length;a++){var d=i[a].key;c+='<option value="'+d+'" data-subtext="'+i[a].doc_count+'">'+d+"</option>"}var u=$("<select />",{multiple:!0,"data-live-search":!0,class:"form-control",html:c});b.prepend($("<div />",{class:"form-group",html:u})),u.selectpicker({style:"btn-light",noneSelectedText:n.label,windowPadding:70})}m.removeClass("ajax")},l=m.find("#search-products"),n=l.find("input");n.attr("placeholder",f({en_us:"Polo Shirt",pt_br:"Camisa Polo"})),l.submit(function(){s=n.val().trim(),o()}),r()}}();