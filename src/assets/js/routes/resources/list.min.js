/*!
 * Copyright 2018 E-Com Club
 */
!function(){"use strict";var a=window.tabId,b=$("#"+a+"-tab-normal");window.renderContentIds(b),$("#"+a+"-create").click(function(){window.location="/"+window.location.hash+"/new"});var c=window.tabData[a],d=c.result;if(d.length){var e,f='<div class="custom-controls-stacked"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" /><label class="custom-control-label"> </label></div></div>',g=$("#"+a+"-resource-list"),h=0,i=0;e=c.meta.hasOwnProperty("limit")?c.meta.limit:100;var j,k,l=[{align:"center",css:"data-list-check",filtering:!1,sorting:!1,headerTemplate:function(){var b=$(f);return b.find("input").attr("id",a+"-check-all").on("change",function(){var a=$(this).is(":checked")?":not(:checked)":":checked";g.find(".data-list-check input"+a).next().click()}),b},itemTemplate:function(a,b){var c=$(f),d=b._id;return c.find("input").on("change",function(){$(this).is(":checked")?o(d):p(d)}),c}}];if(c.meta.hasOwnProperty("fields"))k=c.meta.fields;else{k=[];for(j in d[0])k.push(j)}for(var m=0;m<k.length;m++)"_id"!==(j=k[m])&&l.push({name:j,type:"text"});l.push({css:"data-list-control",filtering:!1,sorting:!1,title:"#",filterTemplate:function(){return $("<div />",{class:"data-list-control-buttons",html:[$("<i />",{class:"fa fa-search",click:function(){g.jsGrid("loadData")}}),$("<i />",{class:"fa fa-filter",click:function(){g.jsGrid("clearFilter")}})]})},itemTemplate:function(){return h++,"#"+(i+h)}}),g.jsGrid({autoload:!0,filtering:!0,sorting:!0,confirmDeleting:!1,pageLoading:!0,rowClick:function(a){var b=a.event.originalEvent||a.event;if(b){var c=b.target;if(c)switch(c.nodeName){case"TD":for(var d=0;d<c.classList.length;d++)if("data-list-check"===c.classList[d])return void $(c).find("label").click();break;case"LABEL":case"INPUT":case"DIV":case"SELECT":return}}window.location="/"+window.location.hash+"/"+a.item._id},controller:{loadData:function(a){return h=0,i=(a.pageIndex-1)*e,{data:d.slice(i,i+e),itemsCount:d.length}}},fields:l});var n=[],o=function(a){n.push(a)},p=function(a){n=$.grep(n,function(b){return b!==a})};$("#"+a+"-delete").click(function(){n.length&&(console.log(n),g.jsGrid("loadData"),n=[],$("#"+a+"-check-all:checked").next().click())})}}();