/*!
 * Copyright 2018 E-Com Club
 */
!function(){"use strict";var a=window.tabId,b=window.Tabs[a].commit,c=function(){return window.Tabs[a].data},d=$("#"+a+"-options-list"),e=randomObjectId(),f=0,g=function(b){var c=$("<li />",{html:'<div class="input-group"><div class="input-group-prepend"><span class="input-group-text"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input"><label class="custom-control-label"> </label></div></span></div><input class="form-control" type="text" name="options." data-json="true" data-object-assign="true"><span class="input-group-append"><button class="btn btn-light" type="button"><i class="fa fa-cog"></i></button></span></div>'});d.append(c);var g;g=b?b._id:objectIdPad(e,""+f),f++;var h=c.find("input");h.data("object-id",g).change(function(){var b=$(this).val();""!==b.trim()?$(this).data("value",JSON.stringify({text:b,option_id:clearAccents(b.toLowerCase(),"_").replace(/[^a-z0-9_]/g,"").substr(0,30)})):$(this).data("value",""),window.Tabs[a].inputToData($(this))}),b?h.val(b.text).data("value",JSON.stringify(b)):h.focus()};$("#"+a+"-add-option").click(function(){g()}),d.next().find("a").click(function(){g()}),$("#"+a+"-delete-options").click(function(){var a=d.find("input:checked");if(a.length){var e=c();a.each(function(){if(e.options){for(var a=0;a<e.options.length;a++)e.options[a]._id===$(this).data("object-id")&&delete e.options[a];b(e,!0)}$(this).closest("li").toggle("slide",function(){$(this).remove()})})}});var h=c();if(h.options)for(var i=0;i<h.options.length;i++)g(h.options[i])}();