/*!
 * Copyright 2018 E-Com Club
 */
!function(){"use strict";var a=window.tabId,b=window.Tabs[a],c=b.commit,d=function(){return b.data},e=window.i18n,f={color:e({en_us:"Color",pt_br:"Cor"})};b.continue=function(){var g=$("#"+a+"-options-list"),h=randomObjectId(),i=0,j='<div class="input-group"><div class="input-group-prepend"><span class="input-group-text"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input"><label class="custom-control-label"> </label></div></span></div><input class="form-control" type="text" name="options." data-json="true" data-object-assign="true"><span class="input-group-append"><button class="btn btn-light" type="button"><i class="fa fa-cog"></i></button></span></div><div class="mt-10 hidden edit-option"><div class="mb-10 row no-gutters"><div class="col mr-2"><input type="text" class="form-control colorpicker" name="options.colors[].0" placeholder="'+f.color+' 1"></div><div class="col mr-2"><input type="text" class="form-control colorpicker" name="options.colors[].1" placeholder="'+f.color+' 2"></div><div class="col"><input type="text" class="form-control colorpicker" name="options.colors[].2" placeholder="'+f.color+' 3"></div></div><a class="i18n" href="javascript:;" onclick="$(this).next().slideToggle()"><span data-lang="en_us">+ Option\'s additional cost</span><span data-lang="pt_br">+ Custo adicional da opção</span></a><div class="hidden mt-10">'+$("#"+a+"-add-to-price").html().replace(/(add_to_price)/g,"options.$1")+"</div></div>",k=function(a){var c=$("<li />",{html:j});g.append(c);var d;d=a?a._id:objectIdPad(h,""+i),i++;var e=c.find("input");e.data("object-id",d);var f=e.filter('[name="options."]');if(f.change(function(){var a=$(this).val();""!==a.trim()?$(this).data("value",JSON.stringify({text:a,option_id:clearAccents(a.toLowerCase(),"_").replace(/[^a-z0-9_]/g,"").substr(0,30)})):$(this).data("value","")}),e.filter(".colorpicker").minicolors({theme:"bootstrap"}),handleInputs(c,b.inputToData),c.find("button").click(function(){c.find(".edit-option").slideToggle()}),c.slideDown(400,function(){a||f.focus()}),a&&(f.val(a.text).data("value",JSON.stringify(a)),a.colors))for(var k=0;k<a.colors.length;k++)e.filter('[name="options.colors[].'+k+'"]').minicolors("value",a.colors[k])};$("#"+a+"-add-option").click(function(){k()}),g.next().find("a").click(function(){k()}),$("#"+a+"-delete-options").click(function(){var a=g.find("input:checked");if(a.length){var b=d();a.each(function(){if(b.options){for(var a=0;a<b.options.length;a++)b.options[a]._id===$(this).data("object-id")&&b.options.splice(a,1);b.options.length||delete b.options,c(b,!0)}$(this).closest("li").slideUp(400,function(){$(this).remove()})})}else app.toast(e({en_us:"Select the options to delete",pt_br:"Selecione as opções para deletar"}))});var l=d();if(l.options)for(var m=0;m<l.options.length;m++)k(l.options[m]);b.formSetup()}}();