!function(){"use strict";var _,y,t=window.tabId,a=window.Tabs[t],x=$("#products-list-container"),w=x.find("#products-list-results"),k=window.i18n,e=function(){_=a.data,y=_.hits.hits.map(function(t){return Object.assign({_id:t._id},t._source)})};if(e(),y.length){var r="",q=[],s=function(){var t;""!==r?(t={bool:{must:{multi_match:{query:r,fields:["name","keywords"]}}}},q.length&&(t.bool.filter=q)):q.length&&(t={bool:{filter:q}});x.addClass("ajax"),a.load(function(){e(),i()},t)},P=$("<div />"),l=$("<div />"),M=$("<form />",{action:"javascript:;",submit:s,html:['<div class="form-group"><input class="form-control text-monospace" placeholder="SKU" type="text" name="sku" data-filter="term"/></div>',P,'<label class="i18n"><span data-lang="en_us">Price</span><span data-lang="pt_br">Preço</span></label>',l,'<div class="flexbox"><div class="form-group"><input class="form-control" type="tel" name="price" data-opt="gte" data-filter="range" data-is-number="true" data-money="true"/><small class="form-text i18n"><span data-lang="en_us">Minimun</span><span data-lang="pt_br">Mínimo</span></small></div><div class="form-group"><input class="form-control" type="tel" name="price" data-opt="lte" data-filter="range" data-is-number="true" data-money="true"/><small class="form-text i18n"><span data-lang="en_us">Maximum</span><span data-lang="pt_br">Máximo</span></small></div></div>']}),n=$("#qvx");n.find("#qvx-title").text(k({en_us:"Filter products",pt_br:"Filtrar produtos"})),n.find("#qvx-body").html(M),n.find("#qvx-footer").html($("<button />",{class:"btn btn-block btn-success",click:function(){s(),quickview.close(n)},html:k({en_us:"Apply filters",pt_br:"Aplicar filtros"})}));var i=function(){for(var t=[],a=0;a<y.length;a++){var e,r,s=y[a],l="/"+window.location.hash+"/"+s._id;e=s.price?formatMoney(s.price,s.currency_id):k({en_us:"No price",pt_br:"Sem preço"}),r=s.quantity?s.quantity+" un":"∞";var n="";if(s.pictures&&s.pictures.length){var i=s.pictures[0],o=i.small;if(!o)for(var c in i)if(i.hasOwnProperty(c)&&"_id"!==c){o=i[c];break}o&&(n='<img src="'+o.url+'">')}var u=$("<div />",{class:"col",html:'<a href="'+l+'" class="item-picture">'+n+'</a><div class="item-info"><a href="'+l+'">'+s.name+'</a><div class="item-price">'+e+'</div><div class="item-qnt">'+r+'</div></div><div class="custom-controls-stacked"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input"><label class="custom-control-label text-monospace">'+s.sku+"</label></div></div>"});t.push(u)}w.html($("<div />",{class:"row row-products",html:t})),P.html("");var d={brands:{label:k({en_us:"Brands",pt_br:"Marcas"})},categories:{label:k({en_us:"Categories",pt_br:"Categorias"})}},p=_.aggregations;for(var m in d)if(d.hasOwnProperty(m)&&p.hasOwnProperty(m)){var f=d[m],v=p[m].buckets,b="";for(a=0;a<v.length;a++){var h=v[a].key;b+='<option value="'+h+'" data-subtext="('+v[a].doc_count+')">'+h+"</option>"}var g=$("<select />",{multiple:!0,"data-live-search":!0,class:"form-control",name:m+".name",html:b});P.prepend($("<div />",{class:"form-group selectpicker-default",html:g})),g.selectpicker({style:"btn-light",noneSelectedText:f.label,windowPadding:70})}x.removeClass("ajax"),handleInputs(M,function(t,a){var e=t.attr("name"),r=t.data("opt"),s=t.data("filter")||"terms",l=t.val();Array.isArray(l)?l.length||(l=null):t.data("is-number")?l=stringToNumber(l):"number"===t.attr("type")?l=parseFloat(l):""===(l=l.trim())&&(l=null);for(var n=0;n<q.length;n++){var i=q[n][s];if(i&&i.hasOwnProperty(e))return void(r?null!==l?i[e][r]=l:(delete i[e][r],Object.keys(i[e]).length||q.splice(n,1)):null!==l?i[e]=l:q.splice(n,1))}if(null!==l){var o={};o[s]={},r?(o[s][e]={},o[s][e][r]=l):o[s][e]=l,q.push(o)}})},o=x.find("#search-products"),c=o.find("input");c.attr("placeholder",k({en_us:"Polo Shirt",pt_br:"Camisa Polo"})),o.submit(function(){r=c.val().trim(),s()}),i()}}();