!function(){"use strict";var a=window.tabId,p=window.Tabs[a],d=p.commit,h=function(){return p.data};p.continue=function(){p.formSetup();var t=p.$form,l=t.find("#t"+a+"-cart-items"),o=t.find("#t"+a+"-cart-items-count"),c=t.find("#t"+a+"-cart-subtotal"),f=function(){setTimeout(function(){for(var t=h(),e=t.items,i=0,n=0,a=0;a<e.length;a++){var r=e[a];i+=r.quantity,n+=r[void 0!==r.final_price?"final_price":"price"]*r.quantity}o.text(i),c.text(formatMoney(n)),t.subtotal!==n&&(t.subtotal=n,d(t,!0))},150)},e=function(e,t){var a=e._id,i=function(t){return $("<a>",{href:"/#/resources/products/"+e.product_id,html:t})},n="",r=e.picture;if(r){var o=r.small||r[Object.keys(r)[0]];o&&(n=i('<img src="'+o.url+'">')).addClass("cart-item-picture")}var c=$("<input>",{class:"form-control w-80px",name:"items.quantity",type:"number",min:0,max:9999999,step:"any"}).change(f),s=$("<input>",{class:"form-control w-120px",name:"items."+(void 0!==e.final_price?"final_price":"price"),type:"tel","data-is-number":"true","data-money":"true"}).change(f),u=$("<i>",{class:"py-10 pr-10 remove fa fa-trash"}).click(function(){for(var t=h(),e=t.items,i=0;i<e.length;i++){var n=e[i];if(n&&n._id===a){e.splice(i,1),d(t,!0),f();break}}m.remove()}),m=$("<tr>",{html:[$("<th>",{scope:"row",html:[u,t+1]}),$("<td>",{html:i(e.sku||"")}),$("<td>",{html:c}),$("<td>",{html:s}),$("<td>",{html:$("<input>",{class:"form-control",name:"items.name",type:"text"})}),$("<td>",{html:n})]});l.append(m),m.find("input").data("object-id",a),handleInputs(m,p.inputToData),setupInputValues(m,e,"items.")},i=h().items;if(i&&i.length)for(var n=0;n<i.length;n++)e(i[n],n);f()}}();